<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="color-scheme" content="light dark" />
        <title>여행 성향 테스트 — 팀원 유형 입력</title>
        <!-- Tailwind -->
        <script src="https://cdn.tailwindcss.com"></script>
        <meta
            name="description"
            content="팀원의 개인 성향 유형을 입력해 팀 전체 성향을 계산하는 화면"
        />
    </head>
    <body
        class="min-h-screen bg-gradient-to-br from-sky-50 via-white to-indigo-50 text-slate-900 dark:from-slate-900 dark:via-slate-900 dark:to-indigo-950 dark:text-slate-100"
    >
        <main class="mx-auto max-w-3xl px-6 py-14">
            <!-- 헤더 -->
            <div class="mb-8 flex items-center justify-between">
                <a
                    href="#"
                    class="inline-flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-white"
                    aria-label="홈"
                >
                    <svg aria-hidden="true" viewBox="0 0 24 24" class="h-5 w-5">
                        <path
                            d="M12 3l8 5v8l-8 5-8-5V8l8-5Z"
                            fill="currentColor"
                        />
                    </svg>
                    여행 성향 테스트
                </a>
                <span
                    class="text-xs font-semibold tracking-wide text-slate-500 dark:text-slate-400"
                    >팀원 입력</span
                >
            </div>

            <!-- 카드 -->
            <section
                class="rounded-3xl bg-white/80 p-8 shadow-xl ring-1 ring-black/5 backdrop-blur-md dark:bg-white/5 dark:ring-white/10"
            >
                <header class="mb-6 text-center">
                    <h1 class="text-2xl font-bold tracking-tight">
                        팀원 유형 입력
                    </h1>
                    <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">
                        개인 결과(유형)를 입력해 팀 단위 분석에 사용합니다. 인원
                        <span class="font-semibold">제한 없음</span>.
                    </p>
                </header>

                <!-- 폼 -->
                <form id="team-form" action="#" method="GET" class="space-y-6">
                    <!-- 동적 리스트 -->
                    <div id="member-list" class="grid gap-3">
                        <!-- 템플릿 (숨김) -->
                        <template id="member-template">
                            <div
                                class="member-row grid grid-cols-1 gap-3 rounded-2xl border border-slate-300 bg-white/60 p-4 shadow-sm transition dark:bg-white/10 dark:border-slate-700 sm:grid-cols-[1fr_minmax(220px,260px)_auto]"
                            >
                                <div>
                                    <label
                                        class="block text-xs font-medium text-slate-600 dark:text-slate-300"
                                        >닉네임</label
                                    >
                                    <input
                                        type="text"
                                        name="nickname[]"
                                        placeholder="예: 민영, Explorer_7"
                                        required
                                        minlength="2"
                                        maxlength="12"
                                        pattern="^[A-Za-z0-9가-힣_\-]{2,12}$"
                                        class="mt-1 w-full rounded-xl border border-slate-300 bg-white/70 px-3 py-2 text-sm shadow-inner outline-none ring-4 ring-transparent transition focus:border-indigo-600 focus:ring-indigo-100 dark:bg-white/10 dark:border-slate-700 dark:focus:border-indigo-400"
                                    />
                                </div>
                                <div>
                                    <label
                                        class="block text-xs font-medium text-slate-600 dark:text-slate-300"
                                        >유형</label
                                    >
                                    <select
                                        name="type[]"
                                        required
                                        class="mt-1 w-full rounded-xl border border-slate-300 bg-white/70 px-3 py-2 text-sm outline-none ring-4 ring-transparent transition focus:border-indigo-600 focus:ring-indigo-100 dark:bg-white/10 dark:border-slate-700 dark:focus:border-indigo-400"
                                    >
                                        <option value="" disabled selected>
                                            유형 선택
                                        </option>
                                        <option value="탐험가형">
                                            🧭 탐험가형
                                        </option>
                                        <option value="힐링러형">
                                            🌿 힐링러형
                                        </option>
                                        <option value="인싸형">
                                            🎉 인싸형
                                        </option>
                                        <option value="기록가형">
                                            📒 기록가형
                                        </option>
                                        <option value="액티비티형">
                                            🧗 액티비티형
                                        </option>
                                        <option value="사진러형">
                                            📷 사진러형
                                        </option>
                                    </select>
                                </div>
                                <div class="flex items-end justify-end gap-2">
                                    <button
                                        type="button"
                                        class="dup-btn hidden rounded-lg border border-slate-300 bg-white px-3 py-2 text-xs font-medium text-slate-700 shadow-sm transition hover:bg-slate-50 dark:bg-white/10 dark:text-slate-200 dark:border-slate-700"
                                    >
                                        복제
                                    </button>
                                    <button
                                        type="button"
                                        class="remove-btn rounded-lg border border-slate-300 bg-white px-3 py-2 text-xs font-medium text-rose-700 shadow-sm transition hover:bg-rose-50 dark:bg-white/10 dark:text-rose-200 dark:border-slate-700"
                                    >
                                        삭제
                                    </button>
                                </div>
                            </div>
                        </template>
                    </div>

                    <!-- 컨트롤 바 -->
                    <div
                        class="flex flex-wrap items-center justify-between gap-3"
                    >
                        <p class="text-xs text-slate-500 dark:text-slate-400">
                            총 인원:
                            <span id="count" class="font-semibold">0</span>
                        </p>
                        <div class="flex gap-2">
                            <button
                                type="button"
                                id="add-btn"
                                class="inline-flex items-center gap-2 rounded-xl bg-slate-800 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-slate-900 dark:bg-slate-200 dark:text-slate-900"
                            >
                                + 팀원 추가
                            </button>
                            <button
                                type="submit"
                                class="inline-flex items-center gap-2 rounded-xl bg-indigo-600 px-5 py-3 text-sm font-medium text-white shadow-lg shadow-indigo-600/20 transition hover:bg-indigo-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2"
                            >
                                팀 결과 보기
                            </button>
                        </div>
                    </div>
                </form>

                <!-- 개발 메모 -->
                <div
                    class="mt-6 rounded-2xl bg-slate-50 p-4 text-[11px] text-slate-500 ring-1 ring-slate-200 dark:bg-slate-800/40 dark:text-slate-300 dark:ring-slate-700"
                >
                    <p class="font-semibold">개발 메모:</p>
                    <ul class="list-disc pl-5">
                        <li>
                            행 수 제한 없음. 제출 시 <code>nickname[]</code>,
                            <code>type[]</code> 배열로 전달.
                        </li>
                        <li>
                            복제 버튼은 2행 이상일 때 자동 표시(최근 입력을
                            빠르게 복사).
                        </li>
                        <li>닉네임 정규식: 한글/영문/숫자/_/-, 2–12자.</li>
                    </ul>
                </div>
            </section>

            <footer class="mt-8 text-center text-xs text-slate-400">
                © 2025 Team 3 — Cokothon
            </footer>
        </main>

        <!-- 최소 JS: 행 추가/삭제/복제 & 카운트 업데이트 (무제한) -->
        <script>
            (function () {
                const list = document.getElementById('member-list');
                const tmpl = document.getElementById('member-template');
                const addBtn = document.getElementById('add-btn');
                const countEl = document.getElementById('count');

                function updateCount() {
                    const n = list.querySelectorAll('.member-row').length;
                    countEl.textContent = n;
                    // 2행 이상일 때만 복제 버튼 보이기
                    list.querySelectorAll('.member-row').forEach((row) => {
                        const dup = row.querySelector('.dup-btn');
                        if (dup) dup.classList.toggle('hidden', n < 2);
                    });
                }

                function wireRow(row) {
                    const remove = row.querySelector('.remove-btn');
                    remove.addEventListener('click', () => {
                        row.remove();
                        updateCount();
                    });
                    const dup = row.querySelector('.dup-btn');
                    if (dup) {
                        dup.addEventListener('click', () => {
                            const nick = row.querySelector(
                                'input[name="nickname[]"]'
                            ).value;
                            const type = row.querySelector(
                                'select[name="type[]"]'
                            ).value;
                            addRow({ nickname: nick, type });
                        });
                    }
                }

                function addRow(values = {}) {
                    const node = tmpl.content.cloneNode(true);
                    const row = node.querySelector('.member-row');
                    const nick = row.querySelector('input[name="nickname[]"]');
                    const type = row.querySelector('select[name="type[]"]');
                    if (values.nickname) nick.value = values.nickname;
                    if (values.type) type.value = values.type;
                    list.appendChild(node);
                    wireRow(list.lastElementChild);
                    updateCount();
                }

                // 초기 1행 생성
                addRow();

                // 무제한 추가
                addBtn.addEventListener('click', () => addRow());
            })();
        </script>
    </body>
</html>
